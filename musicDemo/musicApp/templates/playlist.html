{% extends "base.html" %}

{% load static %}

{% block title %}Song List{% endblock %}

{% block extra_css %}
    <link rel="stylesheet" href="{% static 'css\playlist.css' %}">
    <script src="{% static 'js\collapsable.js' %}"></script>
{% endblock %}

<!-- Main Content -->
{% block content %}
<div class="container">
    <h1>Song List</h1>

    <form class="search-sort-form" method="get" action="{% url 'playlist' %}">
        <div class = "search-bar-container">
            <input type="text" name="search" placeholder="Search songs..." value="{{ search_query }}">
            <button type="submit">Search</button>
        </div>
        <label for="sort">Sort by:</label>
        <select id="sort" name="sort" onchange="this.form.submit()">
            <option value="name_a_z" {% if sort_option == "name_a_z" %}selected{% endif %}>Name A - Z</option>
            <option value="name_z_a" {% if sort_option == "name_z_a" %}selected{% endif %}>Name Z - A</option>
            <option value="newest" {% if sort_option == "newest" %}selected{% endif %}>Newest</option>
            <option value="oldest" {% if sort_option == "oldest" %}selected{% endif %}>Oldest</option>
            <option value="artist_a_z" {% if sort_option == 'artist_a_z' %}selected{% endif %}>Artist A - Z</option>
            <option value="artist_z_a" {% if sort_option == 'artist_z_a' %}selected{% endif %}>Artist Z - A</option>
        </select>
    </form>

    <button type="button" class="collapsible" id="collapse" onclick="myFunction()">Filters</button>
    <div class="content">Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat.</div>

    <ul class="song-list">
        {% for song in songs %}
            <li class="song-item">
                <span class="song-title">{{ song.title }}</span> 
                <span class="song-details">({{ song.sorted_genres|join:", " }}) by {{ song.artists.all|join:", " }}</span>
                <br>
                <em class="release-date">Released on: {{ song.release_date }}</em>
            </li>
        {% empty %}
            <li>No songs available.</li>
        {% endfor %}
    </ul>
</div>
{% endblock %}